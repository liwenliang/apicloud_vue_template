webpackJsonp([7],{"+ee0":function(e,t){},"4yJi":function(e,t){},Cpei:function(e,t){},E51W:function(e,t){},HkdA:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),a={name:"App",mounted:function(){var e,t,n,o,a;e=document,t=window,n=e.getElementsByTagName("html")[0],o="orientationchange"in t?"orientationchange":"resize",a=function(){var t=e.documentElement.clientWidth||e.body.clientWidth;t&&(n.style.fontSize=t/1280*100+"px")},t.addEventListener(o,a),e.addEventListener("DOMContentLoaded",a)}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=n("VU/8")(a,r,!1,function(e){n("+ee0")},null,null).exports,u=n("/ocq"),s={name:"AppHeader",props:{theme:{type:String,default:"light"}},data:function(){return{open:!1,onLine:navigator.onLine}},created:function(){this.checkNetwork()},methods:{checkNetwork:function(){var e=this;setTimeout(function(){e.onLine=navigator.onLine,e.checkNetwork()},3e3)}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"top-header",class:e.theme},[n("div",{staticClass:"top-header-left-logo"}),e._v(" "),n("div",{staticClass:"top-header-right-status"},[n("span",{staticClass:"time"},[e._v("3月22日 10:38")]),e._v(" "),n("i",{class:"wifi "+(e.onLine?"online":"offline")}),e._v(" "),"dark"===e.theme?n("i",{staticClass:"name"},[e._v("W")]):e._e()])])},staticRenderFns:[]};var d=n("VU/8")(s,c,!1,function(e){n("lxiw")},"data-v-29b1ae16",null).exports,p={name:"Layout",components:{appHeader:d},data:function(){return{}},computed:{key:function(){return void 0!==this.$route.name?this.$route.name+ +new Date:this.$route+ +new Date}},methods:{}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"home-layout"},[t("app-header",{attrs:{theme:"light"}}),this._v(" "),t("router-view",{key:this.key})],1)},staticRenderFns:[]};var h=n("VU/8")(p,f,!1,function(e){n("Cpei")},"data-v-7cc9f890",null).exports,l={name:"Layout",components:{appHeader:d},data:function(){return{}},computed:{key:function(){return void 0!==this.$route.name?this.$route.name+ +new Date:this.$route+ +new Date}},methods:{}},m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"operate-layout"},[t("app-header",{attrs:{theme:"dark"}}),this._v(" "),t("router-view",{key:this.key})],1)},staticRenderFns:[]};var v=n("VU/8")(l,m,!1,function(e){n("HkdA")},"data-v-20c91ea2",null).exports;o.a.use(u.a);var g=new u.a({routes:[{path:"/404",component:function(){return n.e(1).then(n.bind(null,"+H76"))}},{path:"/login",name:"Login",component:function(){return n.e(0).then(n.bind(null,"T+/8"))}},{path:"/",name:"Index",redirect:"/home",component:h,children:[{path:"/home",name:"Home",component:function(){return n.e(3).then(n.bind(null,"KR8f"))}}]},{path:"/operate",name:"Operate",component:v,children:[{path:"/operate/get",name:"OperateGet",component:function(){return n.e(5).then(n.bind(null,"dT3T"))}},{path:"/operate/set",name:"OperateSet",component:function(){return n.e(4).then(n.bind(null,"6kej"))}},{path:"/operate/settings",name:"OperateSeting",component:function(){return n.e(2).then(n.bind(null,"+88x"))}}]},{path:"*",redirect:"/404",hidden:!0}]}),k=n("NYxO"),O=n("mvHQ"),b=n.n(O),w={namespaced:!0,state:{beforeGridObj:{},gridObj:{}},mutations:{setBeforeGridObj:function(e,t){e.beforeGridObj=JSON.parse(b()(t))},setGridObj:function(e,t){e.gridObj=JSON.parse(b()(t))}},actions:{}},_=n("//Fk"),E=n.n(_),y=n("Y4FN"),x=n.n(y),S="supplyCabinet-token";function L(){return x.a.get(S)}var N=n("mtWM"),j="FINGER_APP",R=n.n(N).a.create({baseURL:"",timeout:5e3});R.interceptors.request.use(function(e){return H.getters.token&&("post"===e.method?(e.data||(e.data={}),e.data.token=L()):(e.params=e.params||{},e.params.token=L())),"post"===e.method?e.data.app=j:e.params.app=j,e},function(e){console.log(e),E.a.reject(e)}),R.interceptors.response.use(function(e){return e.data},function(e){return console.log("err"+e),E.a.reject(e)});var T=R;var C={namespaced:!0,state:{token:L(),userInfo:{},roles:""},mutations:{SET_TOKEN:function(e,t){e.token=t},SET_USERINFO:function(e,t){e.userInfo=t},SET_ROLES:function(e,t){e.roles=t}},actions:{Login:function(e,t){var n=e.commit;return new E.a(function(e,o){(function(e,t){return T({url:"/user/login",method:"post",data:{mobile:e,password:t}})})(t.mobile,t.password).then(function(t){var o,a=t.data;o=a.token,x.a.set(S,o),n("SET_TOKEN",a.token),e(t)}).catch(function(e){o(e)})})},GetInfo:function(e){var t=e.commit;return new E.a(function(e,n){T({url:"/user/info",method:"get",params:{}}).then(function(n){t("SET_USERINFO",n.data),t("SET_ROLES",n.data.roles),e(n)}).catch(function(e){n(e)})})},FedLogOut:function(e){var t=e.commit;return new E.a(function(e){t("SET_TOKEN",""),x.a.remove(S),e()})}}},F={token:function(e){return e.user.token},userInfo:function(e){return e.user.userInfo},roles:function(e){return e.user.roles},beforeGridObj:function(e){return e.app.beforeGridObj},gridObj:function(e){return e.app.gridObj}};o.a.use(k.a);var H=new k.a.Store({modules:{app:w,user:C},getters:F}),I=(n("uk03"),n("aFc6")),G=(n("E51W"),n("+nBf")),$=n.n(G),U=n("w7Ps"),W=n("sXio"),A=n("1kwf"),P=n("wRhW"),M=n.n(P),D=["/login"];g.beforeEach(function(e,t,n){L()?"/login"===e.path?n({path:"/"}):""===H.getters.roles?H.dispatch("user/GetInfo").then(function(t){0===t.code&&n({to:e,replace:!0})}).catch(function(e){console.log(e),H.dispatch("user/FedLogOut").then(function(){n({path:"/"})})}):n():-1!==D.indexOf(e.path)?n():n("/login?redirect="+e.path)}),n("qs/E"),o.a.use(I.a),o.a.use($.a),o.a.use(U.a),o.a.use(W.a),o.a.use(A.a),o.a.use(M.a,g,{shadow:!1}),new o.a({el:"#app",router:g,store:H,components:{App:i},template:"<App/>"})},QOoJ:function(e,t){},kLMm:function(e,t){},lxiw:function(e,t){},"m/7z":function(e,t){},mhXF:function(e,t){},oPmM:function(e,t){},"qs/E":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("zNUS"),a=n.n(o),r={code:0,data:{userInfo:{name:"admin"},token:"tokenxxxxxxx",roles:["admin"]}},i=function(e){return r},u=function(e){return r};a.a.XHR.prototype.proxy_send=a.a.XHR.prototype.send,a.a.XHR.prototype.send=function(){this.custom.xhr&&(this.custom.xhr.withCredentials=this.withCredentials||!1),this.proxy_send.apply(this,arguments)},a.a.mock(/\/user\/login/,"post",i()),a.a.mock(/\/user\/info\.*/,"get",u);t.default=a.a},uPa8:function(e,t){},uk03:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6e4fea52c5863b5d34ed.js.map